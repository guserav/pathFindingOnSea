<!doctype html>
<html lang="en">
  <head>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/openlayers/openlayers.github.io@master/en/v6.4.3/css/ol.css" type="text/css">
    <link rel="stylesheet" href="/static/style.css" type="text/css">
    <script src="https://cdn.jsdelivr.net/gh/openlayers/openlayers.github.io@master/en/v6.4.3/build/ol.js"></script>
    <title>OpenLayers example</title>
  </head>
  <body>
    <div id="map" class="map"></div>
    <script type="text/javascript">
      var styles = {
        'LineString': new ol.style.Style({
          stroke: new ol.style.Stroke({
            color: 'green',
            width: 1,
          }),
        }),
        'default': new ol.style.Style({
          stroke: new ol.style.Stroke({
            color: 'purple',
            width: 1,
          }),
          image: new ol.style.Circle({
            radius: 3,
            fill: new ol.style.Fill({color: 'rgba(255,0,0,0.1)'}),
            stroke: new ol.style.Stroke({color:'red'}),
          })
        }),
      }
      var styleFunction = function (feature) {
        var ret = styles[feature.getGeometry().getType()];
        if(ret) return ret;
        return styles['default']
      };
      var geojsonObject = {
        'type': 'FeatureCollection',
        'crs': {
          'type': 'name',
          'properties': {
            //'name': 'EPSG:3857',
            'name': 'EPSG:4326 ',
          },
        },
        'features': [
          {
            'type': 'Feature',
            'geometry': {
              'type': 'Point',
              'coordinates': [0, 0],
            },
          },
          {
            'type': 'Feature',
            'geometry': {
              'type': 'Point',
              'coordinates': [3,53],
            },
          },
          {
            'type': 'Feature',
            'geometry': {
              'type': 'LineString',
              'coordinates': [
                [40, -20],
                [80, 20] ],
            },
          },
          {
            'type': 'Feature',
            'geometry': {
              'type': 'LineString',
              'coordinates': [
                [40, 20],
                [80, -20] ],
            },
          },
          {
            'type': 'Feature',
            'geometry': {
              'type': 'Polygon',
              'coordinates': [
                [
                  [-50, -10],
                  [-40, 10],
                  [-30, -10] ] ],
            },
          },
          {
            'type': 'Feature',
            'geometry': {
              'type': 'MultiLineString',
              'coordinates': [
                [
                  [-10, -75],
                  [-10, 75] ],
                [
                  [10, -75],
                  [10, 75] ],
                [
                  [-75, -10],
                  [75, -10] ],
                [
                  [-75, 10],
                  [75, 10] ] ],
            },
          },
          {
            'type': 'Feature',
            'geometry': {
              'type': 'MultiPolygon',
              'coordinates': [
                [
                  [
                    [-50, 60],
                    [-50, 80],
                    [-30, 80],
                    [-30, 60] ] ],
                [
                  [
                    [-20, 60],
                    [-20, 80],
                    [0, 80],
                    [0, 60] ] ],
                [
                  [
                    [10, 60],
                    [10, 80],
                    [30, 80],
                    [30, 60] ] ] ],
            },
          },
          {
            'type': 'Feature',
            'geometry': {
              'type': 'GeometryCollection',
              'geometries': [
                {
                  'type': 'Point',
                  'coordinates': [20, 0],
                },
                {
                  'type': 'Polygon',
                  'coordinates': [
                    [
                      [-4, 21],
                      [58, 13],
                      [15, -23] ] ],
                } ],
            },
          } ],
      };
      var vectorSource = new ol.source.Vector({
        features: new ol.format.GeoJSON().readFeatures(geojsonObject, {dataProjection: 'EPSG:4326', featureProjection: 'EPSG:3857'}),
      });
      var vectorLayer = new ol.layer.Vector({
        source: vectorSource,
        style: styleFunction,
      });

      var map = new ol.Map({
        target: 'map',
        layers: [
          new ol.layer.Tile({
            source: new ol.source.OSM()
          }),
          vectorLayer
        ],
        view: new ol.View({
          center: [0, 0],
          zoom: 4
        })
      });
      map.on('click', function(e){
        console.log(ol.proj.transform(e.coordinate, e.map.getView().getProjection(), 'EPSG:4326'));
      });
    </script>
    <button onClick='javascript:map.updateSize()'>Click me after resizing</button>
  </body>
</html>
